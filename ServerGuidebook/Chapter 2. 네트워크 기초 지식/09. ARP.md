## Chapter 2. 네트워크 기초 지식
### 09. ARP
* MAC주소는 컴퓨터의 NIC(Network Interface Card)에 새겨져 있는 물리적인 주소.
* IP주소는 OS에서 설정하는 논리적인 주소.
* 컴퓨터끼리 통신할 때 통신 데이터의 IP주소는 출발지부터 목적지까지 바뀌지 않지만 MAC주소는 NIC를 경유할 때마다 바뀐다.
* 이 두 주소는 따로따로 이용하는 것이 아니라 서로 협조하면서 사용해야 하는데, 협조하면서 이용할 수 있도록 물리와 논리 다리 역할을 하고 있는 것이 `'ARP(Address Resolution Protocol)'`이다.
* ARP이 실제로 하는 일은 `IP주소와 MAC주소를 대응`시키는 것이다.
* 컴퓨터는 제 3계층으로부터 받은 패킷을 프레임으로 만들어 케이블로 흘려보내야한다. 
* 하지만 받은 패킷만으로는 프레임을 만들기 위한 정보가 부족하다.
	* Why? 출발지 MAC주소는 자기 자신의 NIC에 쓰여있는 MAC주소이므로 알 수 있지만 목적지 MAC주소는 모르기 때문.
* 이때 ARP를 이용하여 IP주소로부터 MAC주소를 구하는 것이다.

<br/>

* 통신 데이터의 주소
    * 출발지 IP주소, 출발지 MAC주소는 둘 다 자신의 주소이므로 OS가 자동 설정한다.
    * 목적지 IP주소는 애플리케이션에 의해 설정된 것을 사용한다.
    * 목적지 MAC주소는 `ARP`로부터 정보를 얻어 OS가 자동으로 설정한다.

<br/>

* 데이터를 송신하는 컴퓨터가 제 3계층으로부터 패킷을 받으면 → 패킷의 목적지 IP주소를 본다.
	* 동일한 네트워크에 있는 컴퓨터의 것이라면? 그 IP주소를 ARP에서 조회(ARP 리퀘스트)하여 응답 결과(ARP 리플라이)를 `'ARP 테이블'`이라는 메모리 상의 테이블에 등록시킴 후 그 정보를 바탕으로 프레임을 만든다.
	* 다른 네트워크에 있는 컴퓨터의 것이라면? 기본 게이트웨이의 MAC주소를 ARP에서 조회하여 똑같은 처리를 수행한다. <br/>**기본 게이트웨이란 자신 이외의 네트워크로 갈 때 사용하는 출구가 되는 IP주소** 로, 방화벽이나 라우터의 IP주소가 기본 게이트웨이가 되는 경우가 많다. `자신이 모르는 네트워크의 목적지 IP주소로 가는 패킷인 경우 일단 기본 게이트웨이의 MAC주소로 송신하는 것이다.`
